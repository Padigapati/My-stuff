@model IEnumerable<TRY.Models.Product2>

@{
    ViewBag.Title = "Cart";
}
<link href="~/Content/bootstrap.min.css" rel="stylesheet" />
<script src="~/Scripts/bootstrap.min.js"></script>
<script src="~/Scripts/jquery-1.10.2.min.js"></script>



@Session["username"]
<h2>Cart</h2>
@foreach(var item in Model){
    var count = item.Count;
    if(Convert.ToInt32(count) == 0)
    {
        <h2>No items selected please select item from the store</h2>
    }
        
}


<button><h3>@Html.ActionLink("Proceed to checkout", "Checkout", new { username = Session["username"] })</h3></button>
@{
    var amount = 0;
    int[] id;
    int[] TotalPrice;
    id = new int[1000];
    TotalPrice = new int[1000];
    var i = -1;
}

<table>
    @foreach (var item in Model)
    {
        i++;
        var base64 = Convert.ToBase64String(item.Img);
        var imgsrc = string.Format("data:image/gif;base64,{0}", base64);
        id[i] = item.Id;
        var name = item.Name;
        var price = item.Price;
        var count = item.Count;
        TotalPrice[i] = Convert.ToInt32(price) * Convert.ToInt32(count);
        amount = amount + TotalPrice[i];
        <tr>
            <p>_________________________________________________________________________________________________________________________________________</p>
            <td><h3>@name</h3></td>
            <td><img src="@imgsrc" style="width:200px;height:200px" /></td>
            <td><h3>Price:$@price  Quantity:@count</h3></td>
            <td><h3>Total Price =$@TotalPrice[i]</h3></td>
            <td><button><h3>@Html.ActionLink("Remove", "RemoveProduct", new { id = id[i] })</h3></button></td>
        </tr>
    }
</table>

<h2>Total amount : $@amount</h2>
<script type="text/javascript">


</script>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}

