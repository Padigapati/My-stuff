@model TRY.Models.User


    <script src="~/Scripts/jquery.validate.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>

    <link href="~/Content/bootstrap.min.css" rel="stylesheet" />
    <script src="~/Scripts/bootstrap.min.js"></script>
    <script src="~/Scripts/jquery-1.10.2.min.js"></script>

    
    <div class="container">
        
        <div class="row">
            <div class="col-md-4 col-md-offset-4">

                <h2 style="text-align: center; margin-bottom:30px">Sign in to your account</h2>
                <h5 style=" color:red; text-align:center" id="msg"> Invalid user details </h5>
                <form id="loginForm">

                    <div class="form-group" style="margin-bottom:30px">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                            @Html.TextBoxFor(m => m.Username, new { @class = "form-control", @placeholder = "Username", @name = "Username" })
                            @Html.ValidationMessageFor(m => m.Username, "", new { @class = "text-danger" })
                        </div>
                    </div>
                    <div class="form-group" style="margin-bottom:30px">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
                            @Html.TextBoxFor(m => m.Password, new { @class = "form-control", @placeholder = "Password", @name = "Password", @type = "Password" })
                            @Html.ValidationMessageFor(m => m.Password, "", new { @class = "text-danger" })
                        </div>
                    </div>
                    <div class="form-group">
                        <button type="submit" class="btn btn-info form-control" onclick="Login()">Login</button>
                    </div>
                    <div class="form-group">
                        <a onclick="signup()" style="cursor: pointer">SignUp</a>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="modal fade" id="regModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <img src="~/Img/img31.jpg" style="height:100px; width:400px;margin-left:80px;margin-top:10px" />
                    <a href="#" class="close" data-dismiss="modal">&times;</a>
                    <h2 class="text-center"></h2>
                    <h4 id="message1" style="color:red" class="text-center">Username and Password are required</h4>
                    <h4 id="message2" style="color:green" class="text-center">Send an email to your email address with confirmation link</h4>
                    <h4 id="message3" style="color:red" class="text-center">Registration Failed</h4>
                </div>
                <div class="modal-body">
                    <form id="regForm">
                        <div class="form-group ">
                            <div class="input-group">
                                
                                <input  style="margin-left:140px; width:400px; height: 50px;font-size:large" type="text" class="form-control" name="Username" placeholder="User name" id="regUsername">
                            </div>
                        </div>
                        <div class="form-group text-center">
                            <div class="input-group">
                                
                                <input style="margin-left:140px; width:400px; height: 50px;font-size:large" type="password" class="form-control" name="Password" placeholder="Password" id="regPassword">
                            </div>
                        </div>
                        <div class="form-group text-center">
                            <div class="input-group">
                                
                                <input style="margin-left:140px; width:400px; height: 50px;font-size:large" type="email" class="form-control" name="Email" placeholder="Email" id="Email">
                            </div>
                        </div>
                        <div class="form-group text-center">
                            <div class="input-group" style="margin-left:30px;width: 500px; height: 50px;font-size:large">
                                
                                @Html.DropDownListFor(m => m.Gender, new List<SelectListItem>
                                               {
                                                   new SelectListItem{ Text="Male", Value="male"},
                                                   new SelectListItem{ Text="Female", Value="female"}
                                               }, "--Select Gender--", new { @class = "form-control", @name = "Gender", @ID = "Gender" })
                            </div>
                        </div>
                        <div class="form-group text-center">
                            <div class="input-group" style="margin-left:30px;width: 500px; height: 50px;font-size:large">
                                
                                @Html.DropDownListFor(m => m.Level, new List<SelectListItem>
                                           {
                                               new SelectListItem{ Text="Student", Value="student"},
                                               new SelectListItem{ Text="Professor", Value="professor"}
                                           }, "---Select Level---", new { @class = "form-control", @name = "Level", @ID = "Level" })
                            </div>
                        </div>
                    </form>
                    <div class="form-group">
                        <button style="margin-left:130px;width: 300px" class=" btn btn-info form-control" type="submit" onclick="Register()"><i class="glyphicon glyphicon-registration-mark"></i>Register</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        $('#msg').hide();
        $('#message1').hide();
        function signup() {
            $('#regModal').modal();
            $('#message1').hide();
            $('#message2').hide();
            $('#message3').hide();
            $('#regForm')[0].reset();


        }

        function Register() {
            if ($('#regUsername').val() == '' || $('#regPassword').val() == '')
                $('#message1').show();
            else {
                $('#message1').hide();
                var data = $('#regForm').serialize();
                $.ajax({
                    type: 'post',
                    data: data,
                    url: '/Home/saveData',
                    success: function (result) {
                        if (result == 1) {
                            $('#message2').show();
                            $('#regForm')[0].reset();
                        }
                        else
                            $('#message3').show();
                    }
                });
            }
        }

        var Login = function () {
            var data = $('#loginForm').serialize();
            $.ajax({
                type: 'post',
                data: data,
                url: '/Home/login',
                success: function (result) {
                    if (result == 0)
                        $('#msg').show(2000).hide();
                    else {
                        var l = result.length;
                        var str = result.substring(2, l);
                        sessionStorage.Index = str;
                        window.location.href = "/Home/Cart";
                    }
                }
            });
        }
    </script>

    @section Scripts {
        @Scripts.Render("~/bundles/jqueryval")
    }